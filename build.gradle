apply plugin: 'java'
//apply plugin: 'eclipse'


version = '2.0.0'
sourceCompatibility = 1.8
targetCompatibility = 1.8

java {
//    libsDirName = "../release"
    
    withJavadocJar()
    withSourcesJar()    
}

build {
    doLast {
        copy {
            from 'build/libs'
            into 'release'
        }
    }
}

jar {
    manifest {
        attributes 'Implementation-Title': 'ONVIF Java Library',  
        	'Implementation-Version': version,
        	'Main-Class': 'de.onvif.Main'
    }
    
    dependsOn configurations.runtimeClasspath
    from {
        configurations.runtimeClasspath.findAll { 
            it.name.endsWith('jar') && (!it.name.contains('javadoc')) && (!it.name.contains('sources'))            
        }.collect { zipTree(it) }
    }
}

repositories {
   flatDir {
       dirs 'libs'
   }
   mavenCentral()
}


javadoc {
    options.tags = [ "date" ] 
    source = sourceSets.main.allJava
    classpath = configurations.compile
}

dependencies {
    implementation group: 'commons-codec', name: 'commons-codec', version: '1.15'    
    compile group: 'commons-codec', name: 'commons-codec', version: '1.15', classifier: 'sources'
    compile group: 'commons-codec', name: 'commons-codec', version: '1.15', classifier: 'javadoc'    
    implementation 'junit:junit:4.13.2'
//    compile name: 'javaWsDiscovery-0.1'
}

